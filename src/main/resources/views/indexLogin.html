<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 
<title>login</title>
</head>
<body>
	<div>
		<div class="loginForm">
			<form id="loginHome" th:action="@{/login}" method="POST" onsubmit="return checkForm()">
			<h2 align="center">冰箱管理平台</h2>
			<h3 align="center">Fridge Portal System</h3>
			<table border="0" cellpadding="0" cellspacing="0" align="center">
					<tr>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td><input class="loginText" placeholder="請輸入帳號" type="text" id="username"
							name="username" value="" autocomplete="off"></td>
					</tr>
					<tr>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td><input class="loginPasText" placeholder="請輸入密碼" id="password"
							type="password" name="password" value="" autocomplete="off"></td>
					</tr>
					<tr>
						<td><input id="errorMessage" th:value="${session.error}" style="display:none"/></td>
					</tr>
					<tr>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td colspan="2" align="center">
							<input class="loginButton" type="submit" value="登入">
							<input class="loginButton" type="button" id="guestLogin" value="訪客登入">
						</td>
					</tr>

				</table>
			
			</form>
		</div>
	</div>
<script th:src="@{/js/jquery-3.2.1.min.js}"></script>
<script th:inline="javascript">
$("#guestLogin").click(function(){
	$("#username").val("guest");
	$("#password").val("guest");
	$("#loginHome").submit();
});

/*<![CDATA[*/
function checkForm(){
	
// 	return true;
}

var msg = $("#errorMessage").val();

window.onload = function(){
	console.log(msg);
	function ErrorMsg(){
		if(msg){
			alert(msg);
		}

	}
	sleep(200).then(() => {
		ErrorMsg();
	});

}
function sleep (time) {
	return new Promise((resolve) => setTimeout(resolve, time));
}
/*]]>*/
</script>


</body>
</html>